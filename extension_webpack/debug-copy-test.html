<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Copy Answer Debug Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 40px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .job-text {
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #4299e1;
            cursor: text;
            user-select: text;
        }
        .debug-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #dee2e6;
        }
        .instructions {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #ffc107;
            margin-bottom: 30px;
        }
        .console-tips {
            background: #d1ecf1;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #bee5eb;
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîç Copy Answer Debug Test</h1>
        
        <div class="debug-section">
            <h3>üõ†Ô∏è Debug Features Added</h3>
            <ul>
                <li>‚úÖ Comprehensive logging in copyAnswer() method</li>
                <li>‚úÖ Fallback method debugging</li>
                <li>‚úÖ Safe wrapper function logging</li>
                <li>‚úÖ Direct button event listener</li>
                <li>‚úÖ DOM element verification</li>
                <li>‚úÖ Startup verification logging</li>
            </ul>
        </div>

        <div class="instructions">
            <h3>üß™ Test Instructions</h3>
            <ol>
                <li><strong>Open Browser Console</strong> - Press F12 or right-click ‚Üí Inspect ‚Üí Console</li>
                <li><strong>Load the extension</strong> - Ensure Job Hunter extension is loaded</li>
                <li><strong>Select text below</strong> - Select any text (minimum 10 characters)</li>
                <li><strong>Click AI icon</strong> - A blue "AI" icon should appear near selection</li>
                <li><strong>Click Generate Answer</strong> - Wait for answer to be generated</li>
                <li><strong>Click Copy Answer</strong> - Click the "üìã Copy Answer" button</li>
                <li><strong>Check console logs</strong> - Look for debug output in console</li>
            </ol>
        </div>

        <div class="console-tips">
            <h3>üìä What to Look for in Console</h3>
            <p><strong>Expected log sequence:</strong></p>
            <ol>
                <li><code>=== SAFE WRAPPER COPY ANSWER CALLED ===</code> - Button click detected</li>
                <li><code>Copy Answer: Method called</code> - Function execution started</li>
                <li><code>Copy Answer: Found answerElement</code> - Answer text found</li>
                <li><code>Copy Answer: Trying modern clipboard API</code> - Copy attempt</li>
                <li><code>Copy Answer: SUCCESS</code> - Success message</li>
            </ol>
            
            <p><strong>If something fails:</strong></p>
            <ul>
                <li>Look for error messages with detailed stack traces</li>
                <li>Check if DOM elements are found (answerElement, copy button, etc.)</li>
                <li>Verify clipboard API availability</li>
                <li>Check if safe wrapper is available</li>
            </ul>
        </div>

        <div class="debug-section">
            <h3>üîß Manual Test Commands</h3>
            <p>Run these commands in console to test manually:</p>
            <code>
                // Test popup manually<br>
                window.testAnswerGenerationPopup()<br><br>
                
                // Test copy function directly<br>
                window.manualTestCopy()<br><br>
                
                // Check manager availability<br>
                console.log("Manager:", !!window.answerGenerationManager)<br>
                console.log("Safe wrapper:", !!window.safeAnswerGenerationManager)<br><br>
                
                // Debug popup state<br>
                window.debugAnswerGenerationPopup()
            </code>
        </div>

        <div class="job-text">
            <h3>Test Job Description:</h3>
            <p>We are seeking a Senior Software Engineer with extensive experience in React, Node.js, and cloud technologies. The ideal candidate will have 5+ years of full-stack development experience, strong problem-solving skills, and the ability to work in a collaborative team environment.</p>
            
            <p><strong>Key Requirements:</strong></p>
            <ul>
                <li>Strong JavaScript and TypeScript programming skills</li>
                <li>Experience with React and modern frontend frameworks</li>
                <li>Knowledge of cloud platforms (AWS, Azure, or GCP preferred)</li>
                <li>Experience with microservices architecture and distributed systems</li>
                <li>Excellent communication and teamwork abilities</li>
            </ul>
        </div>

        <div class="job-text">
            <h3>Technical Interview Question:</h3>
            <p>Describe your experience with designing and implementing scalable microservices architectures. How would you approach monitoring, logging, and error handling in a distributed system? What strategies would you use to ensure system reliability, performance, and data consistency?</p>
        </div>

        <div class="job-text">
            <h3>Behavioral Question:</h3>
            <p>Tell me about a time when you had to learn a new technology quickly to meet a critical project deadline. How did you approach the learning process, what resources did you use, and what was the final outcome? How did this experience change your approach to learning new technologies?</p>
        </div>
    </div>

    <script>
        // Additional debugging for this test page
        console.log("=== COPY ANSWER DEBUG TEST PAGE LOADED ===");
        
        // Check if extension content script loaded
        setTimeout(() => {
            console.log("Extension check after 1 second:");
            console.log("- testAnswerGenerationPopup available:", typeof window.testAnswerGenerationPopup);
            console.log("- answerGenerationManager available:", typeof window.answerGenerationManager);
            console.log("- safeAnswerGenerationManager available:", typeof window.safeAnswerGenerationManager);
            console.log("- manualTestCopy available:", typeof window.manualTestCopy);
        }, 1000);
    </script>
</body>
</html>