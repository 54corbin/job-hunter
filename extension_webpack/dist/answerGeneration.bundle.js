(()=>{"use strict";({7427:function(){var t=this&&this.__awaiter||function(t,n,e,o){return new(e||(e=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function p(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(a,p)}s((o=o.apply(t,n||[])).next())})};window.safeAnswerGenerationManager={generateAnswer:()=>{try{const t=window.answerGenerationManager;return t&&"function"==typeof t.generateAnswer?t.generateAnswer():(console.error("Safe wrapper: Manager not ready yet, waiting..."),setTimeout(()=>{const t=window.answerGenerationManager;if(t&&"function"==typeof t.generateAnswer)return t.generateAnswer();console.error("Safe wrapper: Manager still not available after retry"),"undefined"!=typeof alert&&alert("Answer Generation: Extension is loading, please try again in a moment.")},100),Promise.resolve())}catch(t){return console.error("Safe wrapper: Error in generateAnswer:",t),"undefined"!=typeof alert&&alert("Answer Generation: An error occurred. Please try again."),Promise.resolve()}},copyAnswer:()=>{try{const t=window.answerGenerationManager;return t&&"function"==typeof t.copyAnswer?t.copyAnswer():(console.error("Safe wrapper: Manager not ready for copyAnswer"),Promise.resolve())}catch(t){return console.error("Safe wrapper: Error in copyAnswer:",t),Promise.resolve()}}},window.AGWrapper=window.safeAnswerGenerationManager;const n=new class{constructor(){this.popupState={isVisible:!1,position:{x:0,y:0},selectedText:"",isInjected:!1},this.popupElement=null,this.hideTimeout=null,this.init()}init(){this.addEventListeners()}addEventListeners(){let t;document.addEventListener("mouseup",()=>{clearTimeout(t),t=setTimeout(()=>{this.handleTextSelection()},300)}),document.addEventListener("keyup",t=>{"Escape"===t.key&&this.hidePopup()}),chrome.runtime.onMessage.addListener((t,n,e)=>{"SHOW_ANSWER_POPUP"===t.type?(this.showInjectedPopup(t.data.selectedText,t.data.position),e({status:"ok"})):"HIDE_ANSWER_POPUP"===t.type&&(this.hidePopup(),e({status:"ok"}))})}handleTextSelection(){const t=window.getSelection();if(!t||t.isCollapsed)return void this.hidePopup();const n=t.toString().trim();if(n.length<10)return void this.hidePopup();this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),this.popupState.selectedText=n;const e=t.getRangeAt(0).getBoundingClientRect(),o={x:e.left+e.width/2,y:e.top-10};this.showIcon(o)}showIcon(t){this.removeIcon();const n=document.createElement("div");n.id="answer-generation-icon",n.style.cssText="\n      position: fixed !important;\n      z-index: 2147483647 !important;\n      background: linear-gradient(135deg, #3B82F6, #2563EB) !important;\n      border: none !important;\n      border-radius: 16px !important;\n      box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3) !important;\n      padding: 8px 12px !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      font-size: 13px !important;\n      cursor: pointer !important;\n      opacity: 0 !important;\n      transform: scale(0.8) !important;\n      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;\n      pointer-events: none !important;\n      display: flex !important;\n      align-items: center !important;\n      gap: 6px !important;\n      justify-content: center !important;\n      color: white !important;\n      font-weight: 600 !important;\n      visibility: hidden !important;\n      user-select: none !important;\n    ",n.innerHTML='\n      <div style="display: flex; align-items: center; gap: 6px; color: white;">\n        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="opacity: 0.9;">\n          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>\n        </svg>\n        <span style="font-size: 12px; font-weight: 500;">AI</span>\n      </div>\n    ';const e=Math.max(10,Math.min(t.x-25,window.innerWidth-70)),o=Math.max(10,t.y-35);n.style.left=`${e}px`,n.style.top=`${o}px`,n.addEventListener("click",()=>{this.showInjectedPopup(this.popupState.selectedText,t),this.removeIcon()}),document.body.appendChild(n),this.popupElement=n,setTimeout(()=>{this.popupElement&&(this.popupElement.style.opacity="1",this.popupElement.style.transform="scale(1)",this.popupElement.style.pointerEvents="auto",this.popupElement.style.visibility="visible")},50),setTimeout(()=>{this.popupState.isVisible&&this.scheduleHide()},1500)}removeIcon(){const t=document.getElementById("answer-generation-icon");t&&t.remove(),this.popupElement=null}scheduleHide(){this.hideTimeout&&clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(()=>{this.removeIcon()},8e3)}hidePopup(){const t=document.getElementById("injected-answer-popup");t&&t.remove(),this.removeIcon(),this.popupState.isVisible=!1,this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}showInjectedPopup(t,n){this.hidePopup();const e=document.createElement("div");e.id="injected-answer-popup",e.style.cssText="\n      position: fixed !important;\n      top: 0 !important;\n      left: 0 !important;\n      width: 100% !important;\n      height: 100% !important;\n      z-index: 2147483647 !important;\n      pointer-events: none !important;\n    ";const o=document.createElement("div");o.style.cssText="\n      position: absolute !important;\n      pointer-events: auto !important;\n    ";const i=(window.innerWidth-480)/2;o.style.left=`${Math.max(20,i)}px`,o.style.top="20px",o.style.zIndex="2147483647",o.innerHTML=`\n      <div style="\n        background: white !important;\n        border-radius: 12px !important;\n        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;\n        border: 1px solid #e5e7eb !important;\n        width: 480px !important;\n        max-height: 600px !important;\n        overflow: hidden !important;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      ">\n        \x3c!-- Header --\x3e\n        <div style="\n          display: flex !important;\n          align-items: center !important;\n          justify-content: space-between !important;\n          padding: 16px !important;\n          border-bottom: 1px solid #e5e7eb !important;\n          background: linear-gradient(to right, #eff6ff, #e0e7ff) !important;\n        ">\n          <div style="display: flex !important; align-items: center !important; gap: 12px !important;">\n            <div style="\n              width: 32px !important;\n              height: 32px !important;\n              background: #2563eb !important;\n              border-radius: 8px !important;\n              display: flex !important;\n              align-items: center !important;\n              justify-content: center !important;\n              color: white !important;\n              font-weight: bold !important;\n              font-size: 14px !important;\n            ">\n              AI\n            </div>\n            <div>\n              <h3 style="margin: 0 !important; font-size: 18px !important; font-weight: 600 !important; color: #111827 !important;">\n                Answer Generation üìå\n              </h3>\n              <p style="margin: 0 !important; font-size: 12px !important; color: #6b7280 !important;">\n                AI-powered responses ‚Ä¢ Pinned at top for visibility ‚Ä¢ Scroll to see more</p>\n            </div>\n          </div>\n          <button onclick="this.closest('#injected-answer-popup').remove()" style="\n            background: none !important;\n            border: none !important;\n            cursor: pointer !important;\n            padding: 4px !important;\n            border-radius: 6px !important;\n            color: #6b7280 !important;\n            font-size: 18px !important;\n          ">\n            √ó\n          </button>\n        </div>\n\n        \x3c!-- Content --\x3e\n        <div style="padding: 16px !important; max-height: 500px !important; overflow-y: auto !important;">\n          \x3c!-- Error Display --\x3e\n          <div id="popup-error" style="display: none !important; margin-bottom: 16px !important; padding: 12px !important; background: #fef2f2 !important; border: 1px solid #fecaca !important; border-radius: 8px !important;">\n            <p id="error-message" style="margin: 0 !important; font-size: 14px !important; color: #b91c1c !important;"></p>\n          </div>\n\n          \x3c!-- Selected Text --\x3e\n          <div style="margin-bottom: 16px !important;">\n            <div style="\n              display: flex !important;\n              align-items: center !important;\n              gap: 8px !important;\n              margin-bottom: 8px !important;\n            ">\n              <div style="\n                width: 12px !important;\n                height: 12px !important;\n                background: #f59e0b !important;\n                border-radius: 50% !important;\n                animation: pulse 2s infinite !important;\n              "></div>\n              <label style="\n                display: block !important;\n                font-size: 14px !important;\n                font-weight: 600 !important;\n                color: #92400e !important;\n              ">\n                üìù Selected Text\n              </label>\n            </div>\n            <div style="\n              background: linear-gradient(135deg, #fffbeb, #fef3c7) !important;\n              padding: 16px !important;\n              border-radius: 8px !important;\n              border: 2px solid #fbbf24 !important;\n              max-height: 100px !important;\n              overflow-y: auto !important;\n              position: relative !important;\n            ">\n              <div style="\n                position: absolute !important;\n                top: -8px !important;\n                left: 16px !important;\n                background: #f59e0b !important;\n                color: white !important;\n                padding: 2px 8px !important;\n                border-radius: 4px !important;\n                font-size: 10px !important;\n                font-weight: 500 !important;\n              ">\n                HIGHLIGHTED\n              </div>\n              <p id="selected-text-display" style="\n                margin: 0 !important;\n                font-size: 14px !important;\n                color: #92400e !important;\n                font-style: italic !important;\n                line-height: 1.4 !important;\n                margin-top: 8px !important;\n              ">\n                "${t.length>150?t.substring(0,150)+"...":t}"\n              </p>\n            </div>\n          </div>\n\n          \x3c!-- Prompt Templates --\x3e\n          <div style="margin-bottom: 16px !important;">\n            <label style="display: block !important; font-size: 14px !important; font-weight: 500 !important; color: #374151 !important; margin-bottom: 8px !important;">\n              Prompt Template:\n            </label>\n            <select id="template-selector" style="\n              width: 100% !important;\n              padding: 8px 12px !important;\n              border: 1px solid #d1d5db !important;\n              border-radius: 6px !important;\n              font-size: 14px !important;\n              background: white !important;\n              margin-bottom: 8px !important;\n            ">\n              <option value="job-application">üíº Job Application - Tailored responses</option>\n              <option value="technical-question">‚öôÔ∏è Technical Question - Detailed explanations</option>\n              <option value="interview-response">üé§ Interview Response - STAR method</option>\n              <option value="general-explanation">üí¨ General Explanation - Clear information</option>\n            </select>\n\n            \x3c!-- Quick Settings --\x3e\n            <div style="margin-bottom: 12px !important;">\n              <label style="display: block !important; font-size: 12px !important; font-weight: 500 !important; color: #6b7280 !important; margin-bottom: 4px !important;">\n                Tone:\n              </label>\n              <div style="display: flex !important; gap: 4px !important; margin-bottom: 8px !important;">\n                <button data-setting="tone" data-value="professional" class="setting-btn" style="\n                  padding: 4px 8px !important;\n                  font-size: 12px !important;\n                  border: 1px solid #d1d5db !important;\n                  border-radius: 4px !important;\n                  background: #2563eb !important;\n                  color: white !important;\n                  cursor: pointer !important;\n                ">Professional</button>\n                <button data-setting="tone" data-value="casual" class="setting-btn" style="\n                  padding: 4px 8px !important;\n                  font-size: 12px !important;\n                  border: 1px solid #d1d5db !important;\n                  border-radius: 4px !important;\n                  background: white !important;\n                  color: #374151 !important;\n                  cursor: pointer !important;\n                ">Casual</button>\n                <button data-setting="tone" data-value="technical" class="setting-btn" style="\n                  padding: 4px 8px !important;\n                  font-size: 12px !important;\n                  border: 1px solid #d1d5db !important;\n                  border-radius: 4px !important;\n                  background: white !important;\n                  color: #374151 !important;\n                  cursor: pointer !important;\n                ">Technical</button>\n              </div>\n            </div>\n          </div>\n\n          \x3c!-- Generate Button --\x3e\n          <button id="generate-btn" onclick="(window.safeAnswerGenerationManager||{}).generateAnswer && (window.safeAnswerGenerationManager).generateAnswer()" style="\n            width: 100% !important;\n            background: linear-gradient(to right, #2563eb, #4f46e5) !important;\n            color: white !important;\n            border: none !important;\n            padding: 12px 16px !important;\n            border-radius: 8px !important;\n            font-size: 14px !important;\n            font-weight: 500 !important;\n            cursor: pointer !important;\n            margin-bottom: 16px !important;\n            transition: all 0.2s ease !important;\n          ">\n            üöÄ Generate Answer\n          </button>\n\n          \x3c!-- Loading State --\x3e\n          <div id="loading-state" style="display: none !important; text-align: center !important; margin-bottom: 16px !important;">\n            <div style="\n              display: inline-flex !important;\n              align-items: center !important;\n              gap: 8px !important;\n              color: #6b7280 !important;\n              font-size: 14px !important;\n            ">\n              <div style="\n                width: 16px !important;\n                height: 16px !important;\n                border: 2px solid #e5e7eb !important;\n                border-top: 2px solid #2563eb !important;\n                border-radius: 50% !important;\n                animation: spin 1s linear infinite !important;\n              "></div>\n              Generating answer...\n            </div>\n          </div>\n\n          \x3c!-- Generated Answer --\x3e\n          <div id="answer-section" style="display: none !important; margin-bottom: 16px !important;">\n            <label style="display: block !important; font-size: 14px !important; font-weight: 500 !important; color: #374151 !important; margin-bottom: 8px !important;">\n              Generated Answer:\n            </label>\n            <div style="\n              background: #f0fdf4 !important;\n              padding: 16px !important;\n              border-radius: 8px !important;\n              border: 1px solid #bbf7d0 !important;\n              max-height: 200px !important;\n              overflow-y: auto !important;\n            ">\n              <p id="generated-answer" style="margin: 0 !important; font-size: 14px !important; color: #1f2937 !important; white-space: pre-wrap !important; line-height: 1.5 !important;"></p>\n            </div>\n\n            \x3c!-- Action Buttons --\x3e\n            <div style="display: flex !important; justify-content: center !important; margin-top: 12px !important;">\n              <button onclick="(window.safeAnswerGenerationManager||{}).copyAnswer && (window.safeAnswerGenerationManager).copyAnswer()" style="\n                padding: 12px 24px !important;\n                background: linear-gradient(to right, #2563eb, #4f46e5) !important;\n                color: white !important;\n                border: none !important;\n                border-radius: 8px !important;\n                font-size: 14px !important;\n                font-weight: 600 !important;\n                cursor: pointer !important;\n                transition: all 0.2s ease !important;\n                box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3) !important;\n              " id="copy-answer-btn" data-debug="copy-button">üìã Copy Answer</button>\n            </div>\n          </div>\n\n          \x3c!-- Copy Success Message --\x3e\n          <div id="copy-success" style="display: none !important; text-align: center !important; margin-top: 12px !important; padding: 8px !important; background: #d1fae5 !important; color: #065f46 !important; border-radius: 6px !important; font-size: 12px !important;">\n            ‚úÖ Answer copied to clipboard!\n          </div>\n\n          \x3c!-- Resume Context --\x3e\n          <div id="resume-context" style="\n            margin-top: 16px !important;\n            padding: 16px !important;\n            background: linear-gradient(135deg, #eff6ff, #f0f9ff) !important;\n            border: 1px solid #dbeafe !important;\n            border-radius: 12px !important;\n            display: none !important;\n            position: relative !important;\n          ">\n            <div style="\n              display: flex !important;\n              align-items: center !important;\n              gap: 8px !important;\n              margin-bottom: 8px !important;\n            ">\n              <div style="\n                width: 12px !important;\n                height: 12px !important;\n                background: #10b981 !important;\n                border-radius: 50% !important;\n                animation: pulse 2s infinite !important;\n              "></div>\n              <span style="\n                font-size: 14px !important;\n                font-weight: 600 !important;\n                color: #1e40af !important;\n              ">\n                üéØ Active Resume Profile\n              </span>\n            </div>\n            <p id="resume-info" style="\n              margin: 0 !important;\n              font-size: 13px !important;\n              color: #1e3a8a !important;\n              line-height: 1.4 !important;\n            "></p>\n            <div style="\n              display: flex !important;\n              align-items: center !important;\n              gap: 8px !important;\n              margin-top: 8px !important;\n            ">\n              <p id="relevance-score" style="\n                margin: 0 !important;\n                font-size: 11px !important;\n                color: #059669 !important;\n                background: rgba(16, 185, 129, 0.1) !important;\n                padding: 2px 6px !important;\n                border-radius: 4px !important;\n                font-weight: 500 !important;\n              "></p>\n            </div>\n          </div>\n\n          \x3c!-- Scroll Indicator --\x3e\n          <div style="\n            text-align: center !important;\n            padding: 8px !important;\n            background: #f8fafc !important;\n            border-top: 1px solid #e2e8f0 !important;\n            margin: 0 -16px -16px -16px !important;\n          ">\n            <p style="\n              margin: 0 !important;\n              font-size: 11px !important;\n              color: #64748b !important;\n              display: flex !important;\n              align-items: center !important;\n              justify-content: center !important;\n              gap: 4px !important;\n            ">\n              <span>‚¨áÔ∏è</span>\n              Scroll to see generated answer\n              <span>‚¨áÔ∏è</span>\n            </p>\n          </div>\n        </div>\n      </div>\n    `;const r=document.createElement("style");r.textContent="\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n      @keyframes pulse {\n        0%, 100% { opacity: 1; }\n        50% { opacity: 0.5; }\n      }\n      .setting-btn:hover {\n        opacity: 0.8 !important;\n      }\n    ",document.head.appendChild(r),e.appendChild(o),document.body.appendChild(e),this.popupState.isVisible=!0,this.popupState.selectedText=t,this.initializePopupFunctionality()}initializePopupFunctionality(){this.autoDetectTemplate(),this.loadResumeContext(),this.setupSettingsButtons(),this.setupGenerateButton(),this.setupCopyButton(),window.answerGenerationManager=this}setupCopyButton(){setTimeout(()=>{const t=document.getElementById("copy-answer-btn");t?t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.copyAnswer()}):console.error("Answer Generation: Copy button not found in DOM")},200)}setupGenerateButton(){setTimeout(()=>{const t=document.getElementById("generate-btn");t?t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.generateAnswer()}):console.error("Answer Generation: Generate button not found!")},100)}autoDetectTemplate(){const t=this.popupState.selectedText.toLowerCase(),n=document.getElementById("template-selector");t.includes("job")||t.includes("position")||t.includes("requirements")?n.value="job-application":t.includes("code")||t.includes("technical")||t.includes("api")?n.value="technical-question":t.includes("interview")||t.includes("tell me")||t.includes("describe")?n.value="interview-response":n.value="general-explanation"}loadResumeContext(){return t(this,void 0,void 0,function*(){var t,n,e,o;try{const i=this.popupState.selectedText.toLowerCase(),r=document.getElementById("resume-context"),a=document.getElementById("resume-info"),p=document.getElementById("relevance-score");if(i.includes("job")||i.includes("position")||i.includes("experience")||i.includes("skills")||i.includes("qualification")||i.includes("requirement")){const s=yield this.getUserProfileFromStorage();if(s&&s.resumes&&s.resumes.length>0){const l=null===(t=s.settings)||void 0===t?void 0:t.activeResumeId,d=s.resumes.find(t=>t.id===l)||s.resumes[0];if(d){const t=null===(n=d.parsedInfo)||void 0===n?void 0:n.personalInfo,s=(null===(e=d.parsedInfo)||void 0===e?void 0:e.skills)||[],l=(null===(o=d.parsedInfo)||void 0===o?void 0:o.experience)||[];let m=`Using "${d.name}" as active resume`;if((null==t?void 0:t.name)&&(m+=` ‚Ä¢ ${t.name}`),l.length>0){const t=l[0];m+=` ‚Ä¢ ${t.title} at ${t.company}`}s.length>0&&(m+=` ‚Ä¢ Skills: ${s.slice(0,3).join(", ")}`),a.textContent=m;const c=this.calculateRelevanceScore(i,d.text,s);p.textContent=`‚úì ${c}% relevance based on your background`,r.style.display="block"}}else a.textContent="No resume profile found. Upload a resume to enable personalized responses.",p.textContent="",r.style.display="block"}}catch(t){console.error("Error loading resume context:",t);const n=document.getElementById("resume-context");n&&(n.style.display="none")}})}getUserProfileFromStorage(){return t(this,void 0,void 0,function*(){return new Promise(t=>{chrome&&chrome.storage&&chrome.storage.local?chrome.storage.local.get(["userProfile"],n=>{n.userProfile?t(n.userProfile):t(null)}):(console.warn("chrome.storage.local is not available. Cannot fetch resume context."),t(null))})})}calculateRelevanceScore(t,n,e){let o=0;const i=t.toLowerCase().split(/\s+/),r=n.toLowerCase().split(/\s+/),a=e.filter(n=>t.toLowerCase().includes(n.toLowerCase())).length;o+=Math.min(20*a,60);const p=i.filter(t=>t.length>3&&r.some(n=>n.includes(t))).length;return o+=Math.min(2*p,30),0===o&&(t.includes("job")||t.includes("position")||t.includes("experience"))&&(o=40),Math.min(Math.max(o,25),95)}setupSettingsButtons(){document.querySelectorAll(".setting-btn").forEach(t=>{t.addEventListener("click",t=>{const n=t.target,e=n.getAttribute("data-setting");n.getAttribute("data-value"),document.querySelectorAll(`[data-setting="${e}"]`).forEach(t=>{t.style.background="white",t.style.color="#374151"}),n.style.background="#2563eb",n.style.color="white"})})}generateAnswer(){return t(this,void 0,void 0,function*(){document.getElementById("injected-answer-popup");const t=document.getElementById("generate-btn"),n=document.getElementById("loading-state"),e=document.getElementById("answer-section"),o=document.getElementById("popup-error"),i=document.getElementById("error-message");t.style.display="none",n.style.display="block",e.style.display="none",o.style.display="none";try{const t=document.getElementById("template-selector").value,n=document.querySelector('.setting-btn[style*="background: #2563eb"]'),o=(null==n?void 0:n.getAttribute("data-value"))||"professional",i={"job-application":"application","technical-question":"technical","interview-response":"interview","general-explanation":"general"}[t]||"general",r=yield new Promise(n=>{chrome.runtime.sendMessage({type:"GENERATE_AI_ANSWER",data:{selectedText:this.popupState.selectedText,questionType:i,context:`Tone: ${o}, Template: ${t}`}},t=>{n(t||{error:"No response from background script"})})});if(r.error)throw new Error(r.error);if(!r.answer)throw new Error("No answer generated");document.getElementById("generated-answer").textContent=r.answer,e.style.display="block"}catch(t){console.error("Answer generation error:",t);const n=t instanceof Error?t.message:"Failed to generate answer. Please try again.";i.textContent=n,o.style.display="block"}finally{t.style.display="block",n.style.display="none"}})}createPrompt(t,n){const e=this.popupState.selectedText,o={"job-application":`You are a professional career coach. Generate a compelling response for a job application based on this text: "${e}". Use a ${n} tone and highlight relevant qualifications and experience. Please response with your answers only and must don't contain prefix/leading words and please in plain text.`,"technical-question":`You are a technical expert. Provide a detailed explanation of this technical concept: "${e}". Use a ${n} tone with specific examples and clear explanations. Please response with your answers only and must don't contain prefix/leading words and please in plain text.`,"interview-response":`You are an interview coach. Help craft a thoughtful response to this interview question: "${e}". Use the STAR method and a ${n} tone to showcase relevant experience. Please response with your answers only and must don't contain prefix/leading words and please in plain text.`,"general-explanation":`You are a helpful assistant. Provide a clear, informative explanation about: "${e}". Use a ${n} tone and make it easy to understand.Answer in plain text. Please response with your answers only and must don't contain prefix/leading words and please in plain text.`};return o[t]||o["general-explanation"]}copyAnswer(){return t(this,void 0,void 0,function*(){const t=document.getElementById("generated-answer");if(!t)return void console.error("Copy Answer: Answer element not found");const n=t.textContent||"";if(n.trim())try{navigator.clipboard&&navigator.clipboard.writeText?yield navigator.clipboard.writeText(n):this.fallbackCopyToClipboard(n);const t=document.getElementById("copy-success");t&&(t.style.display="block",setTimeout(()=>{t.style.display="none"},2e3))}catch(t){console.error("Failed to copy to clipboard:",t);try{this.fallbackCopyToClipboard(n);const t=document.getElementById("copy-success");t&&(t.style.display="block",setTimeout(()=>{t.style.display="none"},2e3))}catch(t){console.error("Fallback copy also failed:",t);const e=n.length>200?n.substring(0,200)+"...":n;alert("Failed to copy to clipboard. Here's the answer:\n\n"+e)}}else console.error("Copy Answer: No answer text to copy")})}fallbackCopyToClipboard(t){const n=document.createElement("textarea");n.value=t,n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select();const e=document.execCommand("copy");if(document.body.removeChild(n),!e)throw new Error("execCommand copy failed")}testPopup(){this.popupState.selectedText="This is test text for popup verification. Select any text to test the real functionality.",this.showInjectedPopup(this.popupState.selectedText,{x:200,y:200})}debugPopup(){}};window.answerGenerationManager=n,window.generateAnswer=()=>n.generateAnswer(),window.copyAnswer=()=>n.copyAnswer(),window.testAnswerGenerationPopup=()=>n.testPopup(),window.debugAnswerGenerationPopup=()=>n.debugPopup()}})[7427]()})();